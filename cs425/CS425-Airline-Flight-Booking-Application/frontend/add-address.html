<!doctype html>
<html>
	<!-- this page will likely be embedded somewhere else -->
	<head>
		<title>Credit Card</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css">
		<link rel="stylesheet" href="main.css" />
		<script src="main.js"> </script>

	</head>

	<!--input type name matches schema planning names-->

	<body>
		<div class = "creditCard">
			<h2>Add New Address</h2>
			<form>
				<fieldset>
					<legend>Add New Card</legend>
					<div class="row">
						<label for="line1">Address line1</label>
						<input type="text" name=line1 id="line1-input"/>
					</div>
					<div class="row">
						<label for="line2">Address line2</label>
						<input type="text" name=line2 id="line2-input"/>
					</div>
					<div class="row">
						<label for="postalCode">postal Code</label>
						<input type="text" name=postalCode id="postalCode-input"/>
					</div>
					<div class="row">
						<label for="city">City</label>
						<input type="text" name=city id="city-input"/>
					</div>
					<div class="row">
						<label for="state">State</label>
						<input type="text" name=state id="state-input"/>
					</div>
					<div class="row">
						<label for="country">Country</label>
						<input type="text" name=country id="country-input"/>
					</div>

					<div class="row" id='manage-info'>
			            <div class="row">
			                <button type="button" onclick="save()">Save</button>
			            </div>
		            	<div class="crow">
			                <button type="button" onclick="window.location.href ='address.html';">Back</button>
			            </div>
		        	</div>


				</fieldset>
			</form>
		</div>
	<script>
		async function save(){
			const line1 	 = document.getElementById("line1-input").value;
			const line2 	 = document.getElementById("line2-input").value;
			const postalCode = document.getElementById("postalCode-input").value;
			const city 	 	 = document.getElementById("city-input").value;
			const state 	 = document.getElementById("state-input").value;
			const country 	 = document.getElementById("country-input").value;

			try {
				const resp = await cs425.api.post("/customer/address/add", {
					line1, line2, postalCode, city, state, country
				});
				console.log({resp});
			} catch (e) {
				alert("sorry that failed", e);
				console.error(e);
			}

			window.location = 'address.html';
		}
	</script>

	</body>
</html>
